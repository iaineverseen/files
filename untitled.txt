local lib = {}

local cloneref = (cloneref or function(x) return x end)
local UserInputService = cloneref(game:GetService("UserInputService"))
local TweenService = cloneref(game:GetService("TweenService"))
local RunService = cloneref(game:GetService("RunService"))
local Players = cloneref(game:GetService("Players"))
local CoreGui = cloneref(game:GetService("CoreGui"))
local TextService = cloneref(game:GetService("TextService"))

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local PresetColor = Color3.fromRGB(100, 150, 255) -- Brighter blue
local CloseBind = Enum.KeyCode.RightControl

if CoreGui:FindFirstChild("67Library") then
    CoreGui:FindFirstChild("67Library"):Destroy()
end

local ui = Instance.new("ScreenGui")
ui.Name = "67Library"
ui.Parent = CoreGui
ui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local DeviceType = UserInputService.TouchEnabled and "Mobile" or "PC"

-- Modern font configuration
local ModernFont = Enum.Font.SourceSansBold
local TitleFont = Enum.Font.GothamBlack
local ContentFont = Enum.Font.SourceSans

local MobileToggleButton
if DeviceType == "Mobile" then
    MobileToggleButton = Instance.new("TextButton")
    MobileToggleButton.Name = "MobileToggle"
    MobileToggleButton.Size = UDim2.new(0, 50, 0, 50) -- Slightly larger
    MobileToggleButton.Position = UDim2.new(0, 10, 0.5, -25)
    MobileToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- Brighter
    MobileToggleButton.Text = "−"
    MobileToggleButton.TextColor3 = PresetColor
    MobileToggleButton.Font = TitleFont
    MobileToggleButton.TextSize = 24
    MobileToggleButton.AutoButtonColor = false
    MobileToggleButton.Parent = ui
    
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 12) -- More rounded
    UICorner.Parent = MobileToggleButton
    
    local UIStroke = Instance.new("UIStroke")
    UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke.Color = Color3.fromRGB(80, 80, 80)
    UIStroke.Thickness = 2
    UIStroke.Parent = MobileToggleButton
    
    local Dragging, DragInput, DragStart, StartPosition
    
    local function Update(input)
        local Delta = input.Position - DragStart
        local pos = UDim2.new(
            StartPosition.X.Scale,
            StartPosition.X.Offset + Delta.X,
            StartPosition.Y.Scale,
            StartPosition.Y.Offset + Delta.Y
        )
        MobileToggleButton.Position = pos
    end

    MobileToggleButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = MobileToggleButton.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)

    MobileToggleButton.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            Update(input)
        end
    end)
    
    MobileToggleButton.MouseEnter:Connect(function()
        TweenService:Create(MobileToggleButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(65, 65, 65)
        }):Play()
    end)

    MobileToggleButton.MouseLeave:Connect(function()
        TweenService:Create(MobileToggleButton, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        }):Play()
    end)
    
    coroutine.wrap(function()
        while RunService.Heartbeat:Wait() do
            MobileToggleButton.TextColor3 = PresetColor
            UIStroke.Color = PresetColor
        end
    end)()
end

local function CreateInstance(className, properties)
    local instance = Instance.new(className)
    for property, value in pairs(properties) do
        instance[property] = value
    end
    return instance
end

local function TweenCreate(instance, tweenInfo, properties)
    return TweenService:Create(instance, tweenInfo, properties)
end

local function MakeDraggable(topbarobject, object)
    local Dragging, DragInput, DragStart, StartPosition

    local function Update(input)
        local Delta = input.Position - DragStart
        local pos = UDim2.new(
            StartPosition.X.Scale,
            StartPosition.X.Offset + Delta.X,
            StartPosition.Y.Scale,
            StartPosition.Y.Offset + Delta.Y
        )
        object.Position = pos
    end

    topbarobject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = object.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)

    topbarobject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            Update(input)
        end
    end)
end

function lib:Window(text, preset, closebind)
    CloseBind = closebind or CloseBind
    PresetColor = preset or PresetColor
    local fs = false
    
    local Main = CreateInstance("Frame", {
        Name = "Main",
        Parent = ui,
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = Color3.fromRGB(45, 45, 45), -- Brighter background
        BorderSizePixel = 0,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(0, 580, 0, 350), -- Slightly larger
        ClipsDescendants = true,
        Visible = true
    })

    -- Add modern styling
    local MainCorner = CreateInstance("UICorner", {
        Parent = Main,
        CornerRadius = UDim.new(0, 12)
    })

    local MainStroke = CreateInstance("UIStroke", {
        Parent = Main,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
        Color = Color3.fromRGB(80, 80, 80),
        Thickness = 2
    })

    local TabHold = CreateInstance("ScrollingFrame", {
        Name = "TabHold",
        Parent = Main,
        BackgroundColor3 = Color3.fromRGB(40, 40, 40), -- Brighter tab background
        BackgroundTransparency = 0,
        Position = UDim2.new(0.034, 0, 0.147, 0),
        Size = UDim2.new(0, 120, 0, 270), -- Slightly wider
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100), -- Brighter scrollbar
        ClipsDescendants = true
    })

    CreateInstance("UICorner", {
        Parent = TabHold,
        CornerRadius = UDim.new(0, 8)
    })

    local TabHoldLayout = CreateInstance("UIListLayout", {
        Parent = TabHold,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 8) -- More spacing
    })

    TabHoldLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        TabHold.CanvasSize = UDim2.new(0, 0, 0, TabHoldLayout.AbsoluteContentSize.Y)
    end)

    local Title = CreateInstance("TextLabel", {
        Name = "Title",
        Parent = Main,
        BackgroundTransparency = 1,
        Position = UDim2.new(0.034, 0, 0.056, 0),
        Size = UDim2.new(0, 200, 0, 25),
        Font = TitleFont, -- Modern font
        Text = text,
        TextColor3 = Color3.fromRGB(180, 180, 180), -- Brighter text
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left
    })

    local DragFrame = CreateInstance("Frame", {
        Name = "DragFrame",
        Parent = Main,
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 580, 0, 45)
    })

    local TabFolder = CreateInstance("Folder", {
        Name = "TabFolder",
        Parent = Main
    })

    MakeDraggable(DragFrame, Main)

    local uitoggled = false
    
    if DeviceType == "Mobile" and MobileToggleButton then
        MobileToggleButton.MouseButton1Click:Connect(function()
            uitoggled = not uitoggled
            
            if uitoggled then
                Main.Visible = false
                MobileToggleButton.Text = "+"
                TweenService:Create(MobileToggleButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = PresetColor
                }):Play()
            else
                Main.Visible = true
                MobileToggleButton.Text = "−"
                TweenService:Create(MobileToggleButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end
        end)
    end

    UserInputService.InputBegan:Connect(function(input, processed)
        if not processed and input.KeyCode == CloseBind then
            uitoggled = not uitoggled
            
            if uitoggled then
                Main.Visible = false
                if DeviceType == "Mobile" and MobileToggleButton then
                    MobileToggleButton.Text = "+"
                end
            else
                Main.Visible = true
                if DeviceType == "Mobile" and MobileToggleButton then
                    MobileToggleButton.Text = "−"
                end
            end
        end
    end)

    function lib:ChangePresetColor(newColor)
        PresetColor = newColor
    end

    local tabhold = {}
    
    function tabhold:Tab(text)
        local TabBtn = CreateInstance("TextButton", {
            Name = "TabBtn",
            Parent = TabHold,
            BackgroundColor3 = Color3.fromRGB(45, 45, 45),
            BackgroundTransparency = 0,
            Size = UDim2.new(0, 110, 0, 35), -- Taller buttons
            Font = ModernFont,
            Text = "",
            TextColor3 = Color3.fromRGB(0, 0, 0),
            TextSize = 14,
            AutoButtonColor = false
        })

        CreateInstance("UICorner", {
            Parent = TabBtn,
            CornerRadius = UDim.new(0, 6)
        })

        local TabTitle = CreateInstance("TextLabel", {
            Name = "TabTitle",
            Parent = TabBtn,
            BackgroundTransparency = 1,
            Size = UDim2.new(0, 110, 0, 35),
            Font = ModernFont,
            Text = text,
            TextColor3 = Color3.fromRGB(180, 180, 180), -- Brighter text
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Center -- Centered text
        })

        local TabBtnIndicator = CreateInstance("Frame", {
            Name = "TabBtnIndicator",
            Parent = TabBtn,
            BackgroundColor3 = PresetColor,
            BorderSizePixel = 0,
            Position = UDim2.new(0.5, 0, 1, -3),
            AnchorPoint = Vector2.new(0.5, 1),
            Size = UDim2.new(0, 0, 0, 3)
        })

        CreateInstance("UICorner", {
            Parent = TabBtnIndicator,
            CornerRadius = UDim.new(1, 0)
        })

        coroutine.wrap(function()
            while RunService.Heartbeat:Wait() do
                TabBtnIndicator.BackgroundColor3 = PresetColor
            end
        end)()

        local Tab = CreateInstance("ScrollingFrame", {
            Name = "Tab",
            Parent = TabFolder,
            Active = true,
            BackgroundTransparency = 1,
            BorderSizePixel = 0,
            Position = UDim2.new(0.28, 0, 0.147, 0), -- Adjusted position
            Size = UDim2.new(0, 390, 0, 270), -- Adjusted size
            CanvasSize = UDim2.new(0, 0, 0, 0),
            ScrollBarThickness = 4,
            ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100), -- Brighter scrollbar
            Visible = false
        })

        local TabLayout = CreateInstance("UIListLayout", {
            Parent = Tab,
            SortOrder = Enum.SortOrder.LayoutOrder,
            Padding = UDim.new(0, 8) -- More spacing
        })

        TabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Tab.CanvasSize = UDim2.new(0, 0, 0, TabLayout.AbsoluteContentSize.Y)
        end)

        if not fs then
            fs = true
            TabBtnIndicator.Size = UDim2.new(0, 60, 0, 3) -- Wider indicator
            TabTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
            TabTitle.Font = TitleFont
            Tab.Visible = true
        end

        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(TabFolder:GetChildren()) do
                if v.Name == "Tab" then
                    v.Visible = false
                end
            end
            Tab.Visible = true
            
            for _, v in pairs(TabHold:GetChildren()) do
                if v.Name == "TabBtn" then
                    v.TabBtnIndicator:TweenSize(UDim2.new(0, 0, 0, 3), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    TweenCreate(v.TabTitle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        TextColor3 = Color3.fromRGB(180, 180, 180),
                        Font = ModernFont
                    }):Play()
                end
            end
            
            TabBtnIndicator:TweenSize(UDim2.new(0, 60, 0, 3), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
            TweenCreate(TabTitle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                TextColor3 = Color3.fromRGB(255, 255, 255),
                Font = TitleFont
            }):Play()
        end)

        TabBtn.MouseEnter:Connect(function()
            if TabBtnIndicator.Size ~= UDim2.new(0, 60, 0, 3) then
                TweenService:Create(TabBtn, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end
        end)

        TabBtn.MouseLeave:Connect(function()
            if TabBtnIndicator.Size ~= UDim2.new(0, 60, 0, 3) then
                TweenService:Create(TabBtn, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(45, 45, 45)
                }):Play()
            end
        end)

        local tabcontent = {}
        
        function tabcontent:Button(text, callback)
            local Button = CreateInstance("TextButton", {
                Name = "Button",
                Parent = Tab,
                BackgroundColor3 = Color3.fromRGB(50, 50, 50), -- Brighter
                Size = UDim2.new(0, 380, 0, 45), -- Slightly larger
                AutoButtonColor = false,
                Font = ContentFont,
                Text = "",
                TextColor3 = Color3.fromRGB(0, 0, 0),
                TextSize = 14
            })

            CreateInstance("UICorner", {
                Parent = Button,
                CornerRadius = UDim.new(0, 8) -- More rounded
            })

            local ButtonStroke = CreateInstance("UIStroke", {
                Parent = Button,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                Color = Color3.fromRGB(70, 70, 70),
                Thickness = 1
            })

            local ButtonTitle = CreateInstance("TextLabel", {
                Name = "ButtonTitle",
                Parent = Button,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.04, 0, 0, 0),
                Size = UDim2.new(0, 360, 0, 45),
                Font = ModernFont,
                Text = text,
                TextColor3 = Color3.fromRGB(240, 240, 240), -- Brighter text
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            Button.MouseEnter:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                }):Play()
                TweenService:Create(ButtonStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    Color = PresetColor
                }):Play()
            end)

            Button.MouseLeave:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
                TweenService:Create(ButtonStroke, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    Color = Color3.fromRGB(70, 70, 70)
                }):Play()
            end)

            Button.MouseButton1Click:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = PresetColor,
                    BackgroundTransparency = 0.7
                }):Play()
                TweenService:Create(Button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                    BackgroundTransparency = 0
                }):Play()
                pcall(callback)
            end)
        end

        function tabcontent:Toggle(text, default, callback)
            local toggled = default or false

            local Toggle = CreateInstance("TextButton", {
                Name = "Toggle",
                Parent = Tab,
                BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                Size = UDim2.new(0, 380, 0, 45),
                AutoButtonColor = false,
                Font = ContentFont,
                Text = "",
                TextColor3 = Color3.fromRGB(0, 0, 0),
                TextSize = 14
            })

            CreateInstance("UICorner", {
                Parent = Toggle,
                CornerRadius = UDim.new(0, 8)
            })

            local ToggleStroke = CreateInstance("UIStroke", {
                Parent = Toggle,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                Color = Color3.fromRGB(70, 70, 70),
                Thickness = 1
            })

            local ToggleTitle = CreateInstance("TextLabel", {
                Name = "ToggleTitle",
                Parent = Toggle,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.04, 0, 0, 0),
                Size = UDim2.new(0, 250, 0, 45),
                Font = ModernFont,
                Text = text,
                TextColor3 = Color3.fromRGB(240, 240, 240),
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            local ToggleFrame = CreateInstance("Frame", {
                Name = "ToggleFrame",
                Parent = Toggle,
                BackgroundColor3 = Color3.fromRGB(60, 60, 60),
                Position = UDim2.new(0.85, -20, 0.5, -10),
                AnchorPoint = Vector2.new(0, 0.5),
                Size = UDim2.new(0, 40, 0, 20)
            })
            CreateInstance("UICorner", {Parent = ToggleFrame, CornerRadius = UDim.new(1, 0)})

            local ToggleCircle = CreateInstance("Frame", {
                Name = "ToggleCircle",
                Parent = ToggleFrame,
                BackgroundColor3 = Color3.fromRGB(120, 120, 120),
                Position = UDim2.new(0.1, 0, 0.5, -8),
                AnchorPoint = Vector2.new(0, 0.5),
                Size = UDim2.new(0, 16, 0, 16)
            })
            CreateInstance("UICorner", {Parent = ToggleCircle, CornerRadius = UDim.new(1, 0)})

            local ToggleFill = CreateInstance("Frame", {
                Name = "ToggleFill",
                Parent = ToggleFrame,
                BackgroundColor3 = PresetColor,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, 0, 1, 0)
            })
            CreateInstance("UICorner", {Parent = ToggleFill, CornerRadius = UDim.new(1, 0)})

            coroutine.wrap(function()
                while RunService.Heartbeat:Wait() do
                    ToggleFill.BackgroundColor3 = PresetColor
                end
            end)()

            local function UpdateToggleState()
                if toggled then
                    TweenService:Create(Toggle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                    }):Play()
                    TweenService:Create(ToggleFill, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundTransparency = 0
                    }):Play()
                    TweenService:Create(ToggleCircle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(255, 255, 255),
                        Position = UDim2.new(0.65, 0, 0.5, -8)
                    }):Play()
                    TweenService:Create(ToggleStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Color = PresetColor
                    }):Play()
                else
                    TweenService:Create(Toggle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                    TweenService:Create(ToggleFill, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundTransparency = 1
                    }):Play()
                    TweenService:Create(ToggleCircle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(120, 120, 120),
                        Position = UDim2.new(0.1, 0, 0.5, -8)
                    }):Play()
                    TweenService:Create(ToggleStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Color = Color3.fromRGB(70, 70, 70)
                    }):Play()
                end
                pcall(callback, toggled)
            end

            local function ToggleState()
                toggled = not toggled
                UpdateToggleState()
            end

            Toggle.MouseEnter:Connect(function()
                TweenService:Create(Toggle, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                }):Play()
            end)

            Toggle.MouseLeave:Connect(function()
                if not toggled then
                    TweenService:Create(Toggle, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                end
            end)

            Toggle.MouseButton1Click:Connect(ToggleState)

            UpdateToggleState()

            return {
                Set = function(self, state)
                    if toggled ~= state then
                        toggled = state
                        UpdateToggleState()
                    end
                end
            }
        end

        function tabcontent:Slider(text, min, max, increment, callback)
            local dragging = false
            increment = increment or 1
            local start = min
            
            local Slider = CreateInstance("TextButton", {
                Name = "Slider",
                Parent = Tab,
                BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                Size = UDim2.new(0, 380, 0, 70), -- Taller for better appearance
                AutoButtonColor = false,
                Font = ContentFont,
                Text = "",
                TextColor3 = Color3.fromRGB(0, 0, 0),
                TextSize = 14
            })

            CreateInstance("UICorner", {
                Parent = Slider,
                CornerRadius = UDim.new(0, 8)
            })

            local SliderStroke = CreateInstance("UIStroke", {
                Parent = Slider,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                Color = Color3.fromRGB(70, 70, 70),
                Thickness = 1
            })

            local SliderTitle = CreateInstance("TextLabel", {
                Name = "SliderTitle",
                Parent = Slider,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.04, 0, 0.1, 0),
                Size = UDim2.new(0, 250, 0, 25),
                Font = ModernFont,
                Text = text,
                TextColor3 = Color3.fromRGB(240, 240, 240),
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            local SliderValue = CreateInstance("TextLabel", {
                Name = "SliderValue",
                Parent = Slider,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.65, 0, 0.1, 0),
                Size = UDim2.new(0, 120, 0, 25),
                Font = ModernFont,
                Text = tostring(start),
                TextColor3 = Color3.fromRGB(200, 200, 200),
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Right
            })

            local SlideFrame = CreateInstance("Frame", {
                Name = "SlideFrame",
                Parent = Slider,
                BackgroundColor3 = Color3.fromRGB(60, 60, 60),
                BorderSizePixel = 0,
                Position = UDim2.new(0.04, 0, 0.65, 0),
                Size = UDim2.new(0, 350, 0, 6)
            })

            CreateInstance("UICorner", {
                Parent = SlideFrame,
                CornerRadius = UDim.new(1, 0)
            })

            local CurrentValueFrame = CreateInstance("Frame", {
                Name = "CurrentValueFrame",
                Parent = SlideFrame,
                BackgroundColor3 = PresetColor,
                BorderSizePixel = 0,
                Size = UDim2.new((start - min) / (max - min), 0, 1, 0)
            })

            CreateInstance("UICorner", {
                Parent = CurrentValueFrame,
                CornerRadius = UDim.new(1, 0)
            })

            local SlideCircle = CreateInstance("ImageButton", {
                Name = "SlideCircle",
                Parent = SlideFrame,
                BackgroundTransparency = 1,
                Position = UDim2.new((start - min) / (max - min), -10, 0.5, -10),
                Size = UDim2.new(0, 20, 0, 20),
                Image = "rbxassetid://3570695787",
                ImageColor3 = PresetColor,
                ScaleType = Enum.ScaleType.Slice,
                SliceCenter = Rect.new(100, 100, 100, 100),
                ZIndex = 2
            })

            coroutine.wrap(function()
                while RunService.Heartbeat:Wait() do
                    CurrentValueFrame.BackgroundColor3 = PresetColor
                    SlideCircle.ImageColor3 = PresetColor
                end
            end)()

            local function formatNumber(value)
                if increment < 1 then
                    local formatted = string.format("%.2f", value)
                    formatted = formatted:gsub("%.?0+$", "")
                    return formatted
                else
                    return tostring(math.floor(value))
                end
            end

            local function updateSlider(value)
                value = math.clamp(value, min, max)
                local normalizedValue = (value - min) / (max - min)
                local circlePos = UDim2.new(normalizedValue, -10, 0.5, -10)
                local frameSize = UDim2.new(normalizedValue, 0, 1, 0)
                
                CurrentValueFrame.Size = frameSize
                SlideCircle.Position = circlePos
                
                SliderValue.Text = formatNumber(value)
                pcall(callback, value)
            end

            local function startDrag(input)
                dragging = true
                
                TweenService:Create(Slider, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                }):Play()
                
                local function update(inputPosition)
                    local slideFrameAbsolutePos = SlideFrame.AbsolutePosition.X
                    local slideFrameAbsoluteSize = SlideFrame.AbsoluteSize.X
                    
                    local x = math.clamp(inputPosition.X - slideFrameAbsolutePos, 0, slideFrameAbsoluteSize)
                    local percent = x / slideFrameAbsoluteSize
                    local value = min + percent * (max - min)
                    
                    if increment > 0 then
                        value = math.floor(value / increment) * increment
                    end
                    
                    updateSlider(value)
                end
                
                update(input.Position)
                
                local moveConn
                moveConn = UserInputService.InputChanged:Connect(function(i)
                    if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
                        update(i.Position)
                    end
                end)
                
                local endConn
                endConn = UserInputService.InputEnded:Connect(function(i)
                    if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
                        dragging = false
                        if moveConn then
                            moveConn:Disconnect()
                        end
                        if endConn then
                            endConn:Disconnect()
                        end
                        
                        TweenService:Create(Slider, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                            BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                        }):Play()
                    end
                end)
            end

            SlideCircle.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    startDrag(input)
                end
            end)
            
            SlideFrame.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    startDrag(input)
                end
            end)

            Slider.MouseEnter:Connect(function()
                if not dragging then
                    TweenService:Create(Slider, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                    }):Play()
                end
            end)

            Slider.MouseLeave:Connect(function()
                if not dragging then
                    TweenService:Create(Slider, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                end
            end)

            updateSlider(start)
        end

        function tabcontent:Dropdown(text, list, callback)
            local droptog = false
            local framesize = 0
            local itemcount = 0

            local Dropdown = CreateInstance("Frame", {
                Name = "Dropdown",
                Parent = Tab,
                BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                ClipsDescendants = true,
                Size = UDim2.new(0, 380, 0, 45)
            })

            CreateInstance("UICorner", {
                Parent = Dropdown,
                CornerRadius = UDim.new(0, 8)
            })

            local DropdownStroke = CreateInstance("UIStroke", {
                Parent = Dropdown,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                Color = Color3.fromRGB(70, 70, 70),
                Thickness = 1
            })

            local DropdownBtn = CreateInstance("TextButton", {
                Name = "DropdownBtn",
                Parent = Dropdown,
                BackgroundTransparency = 1,
                Size = UDim2.new(0, 380, 0, 45),
                Font = ContentFont,
                Text = "",
                TextColor3 = Color3.fromRGB(0, 0, 0),
                TextSize = 14
            })

            local DropdownTitle = CreateInstance("TextLabel", {
                Name = "DropdownTitle",
                Parent = Dropdown,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.04, 0, 0, 0),
                Size = UDim2.new(0, 300, 0, 45),
                Font = ModernFont,
                Text = text,
                TextColor3 = Color3.fromRGB(240, 240, 240),
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            local ArrowImg = CreateInstance("ImageLabel", {
                Name = "ArrowImg",
                Parent = Dropdown,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.92, 0, 0.5, -10),
                AnchorPoint = Vector2.new(0, 0.5),
                Size = UDim2.new(0, 20, 0, 20),
                Image = "rbxassetid://6031091004",
                ImageColor3 = Color3.fromRGB(180, 180, 180)
            })

            local DropItemHolder = CreateInstance("ScrollingFrame", {
                Name = "DropItemHolder",
                Parent = Dropdown,
                Active = true,
                BackgroundColor3 = Color3.fromRGB(45, 45, 45),
                BorderSizePixel = 0,
                Position = UDim2.new(0.02, 0, 1.02, 0),
                Size = UDim2.new(0, 365, 0, 0),
                CanvasSize = UDim2.new(0, 0, 0, 0),
                ScrollBarThickness = 4,
                ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
            })

            CreateInstance("UICorner", {
                Parent = DropItemHolder,
                CornerRadius = UDim.new(0, 6)
            })

            local DropLayout = CreateInstance("UIListLayout", {
                Parent = DropItemHolder,
                SortOrder = Enum.SortOrder.LayoutOrder,
                Padding = UDim.new(0, 5)
            })

            DropdownBtn.MouseButton1Click:Connect(function()
                droptog = not droptog
                
                if droptog then
                    local contentSize = math.min(DropLayout.AbsoluteContentSize.Y, 150)
                    Dropdown:TweenSize(UDim2.new(0, 380, 0, 50 + contentSize), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    DropItemHolder:TweenSize(UDim2.new(0, 365, 0, contentSize), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    TweenService:Create(ArrowImg, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Rotation = 180,
                        ImageColor3 = PresetColor
                    }):Play()
                    TweenService:Create(DropdownStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Color = PresetColor
                    }):Play()
                else
                    Dropdown:TweenSize(UDim2.new(0, 380, 0, 45), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    DropItemHolder:TweenSize(UDim2.new(0, 365, 0, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    TweenService:Create(ArrowImg, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Rotation = 0,
                        ImageColor3 = Color3.fromRGB(180, 180, 180)
                    }):Play()
                    TweenService:Create(DropdownStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Color = Color3.fromRGB(70, 70, 70)
                    }):Play()
                end
            end)

            DropdownBtn.MouseEnter:Connect(function()
                TweenService:Create(Dropdown, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                }):Play()
            end)

            DropdownBtn.MouseLeave:Connect(function()
                if not droptog then
                    TweenService:Create(Dropdown, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                end
            end)

            for _, v in pairs(list) do
                local Item = CreateInstance("TextButton", {
                    Name = "Item",
                    Parent = DropItemHolder,
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                    ClipsDescendants = true,
                    Size = UDim2.new(0, 355, 0, 30),
                    AutoButtonColor = false,
                    Font = ModernFont,
                    Text = v,
                    TextColor3 = Color3.fromRGB(240, 240, 240),
                    TextSize = 13
                })

                CreateInstance("UICorner", {
                    Parent = Item,
                    CornerRadius = UDim.new(0, 4)
                })

                Item.MouseEnter:Connect(function()
                    TweenService:Create(Item, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                    }):Play()
                end)

                Item.MouseLeave:Connect(function()
                    TweenService:Create(Item, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                end)

                Item.MouseButton1Click:Connect(function()
                    droptog = false
                    DropdownTitle.Text = text .. " - " .. v
                    pcall(callback, v)
                    Dropdown:TweenSize(UDim2.new(0, 380, 0, 45), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    DropItemHolder:TweenSize(UDim2.new(0, 365, 0, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
                    TweenService:Create(ArrowImg, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Rotation = 0,
                        ImageColor3 = Color3.fromRGB(180, 180, 180)
                    }):Play()
                    TweenService:Create(DropdownStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        Color = Color3.fromRGB(70, 70, 70)
                    }):Play()
                end)

                DropItemHolder.CanvasSize = UDim2.new(0, 0, 0, DropLayout.AbsoluteContentSize.Y)
            end
        end

        function tabcontent:Textbox(text, disappear, callback)
            local Textbox = CreateInstance("Frame", {
                Name = "Textbox",
                Parent = Tab,
                BackgroundColor3 = Color3.fromRGB(50, 50, 50),
                ClipsDescendants = true,
                Size = UDim2.new(0, 380, 0, 45)
            })

            CreateInstance("UICorner", {
                Parent = Textbox,
                CornerRadius = UDim.new(0, 8)
            })

            local TextboxStroke = CreateInstance("UIStroke", {
                Parent = Textbox,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                Color = Color3.fromRGB(70, 70, 70),
                Thickness = 1
            })

            local TextboxTitle = CreateInstance("TextLabel", {
                Name = "TextboxTitle",
                Parent = Textbox,
                BackgroundTransparency = 1,
                Position = UDim2.new(0.04, 0, 0, 0),
                Size = UDim2.new(0, 180, 0, 45),
                Font = ModernFont,
                Text = text,
                TextColor3 = Color3.fromRGB(240, 240, 240),
                TextSize = 14,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            local TextboxFrame = CreateInstance("Frame", {
                Name = "TextboxFrame",
                Parent = Textbox,
                BackgroundColor3 = Color3.fromRGB(40, 40, 40),
                Position = UDim2.new(0.55, 0, 0.5, -12),
                AnchorPoint = Vector2.new(0, 0.5),
                Size = UDim2.new(0, 150, 0, 26)
            })

            CreateInstance("UICorner", {
                Parent = TextboxFrame,
                CornerRadius = UDim.new(0, 6)
            })

            local TextBox = CreateInstance("TextBox", {
                Parent = TextboxFrame,
                BackgroundTransparency = 1,
                Size = UDim2.new(0, 146, 0, 26),
                Position = UDim2.new(0.02, 0, 0, 0),
                Font = ModernFont,
                PlaceholderColor3 = Color3.fromRGB(140, 140, 140),
                PlaceholderText = "Type here...",
                Text = "",
                TextColor3 = Color3.fromRGB(240, 240, 240),
                TextSize = 13,
                TextXAlignment = Enum.TextXAlignment.Left
            })

            TextBox.Focused:Connect(function()
                TweenService:Create(TextboxStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    Color = PresetColor
                }):Play()
                TweenService:Create(TextboxFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(45, 45, 45)
                }):Play()
            end)

            TextBox.FocusLost:Connect(function(enterPressed)
                TweenService:Create(TextboxStroke, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    Color = Color3.fromRGB(70, 70, 70)
                }):Play()
                TweenService:Create(TextboxFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                }):Play()
                
                if enterPressed and #TextBox.Text > 0 then
                    pcall(callback, TextBox.Text)
                    if disappear then
                        TextBox.Text = ""
                    end
                end
            end)

            Textbox.MouseEnter:Connect(function()
                TweenService:Create(Textbox, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                }):Play()
            end)

            Textbox.MouseLeave:Connect(function()
                TweenService:Create(Textbox, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end)
        end

        return tabcontent
    end
    
    return tabhold
end

return lib