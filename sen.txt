local TweenService = cloneref(game:GetService("TweenService"))
local UserInputService = cloneref(game:GetService("UserInputService"))
local CoreGui = cloneref(game:GetService("CoreGui"))

local SentinelLib = {}
local Colors = {
    MainBackground = Color3.fromRGB(30, 30, 30),
    TopBar = Color3.fromRGB(24, 24, 24),
    TabsBackground = Color3.fromRGB(33, 33, 33),
    ElementBackground = Color3.fromRGB(35, 35, 35),
    ElementHover = Color3.fromRGB(40, 40, 40),
    Primary = Color3.fromRGB(17, 85, 232),
    PrimaryDark = Color3.fromRGB(10, 49, 134),
    PrimaryHover = Color3.fromRGB(12, 59, 160),
    SecondaryButton = Color3.fromRGB(14, 69, 188),
    TextPrimary = Color3.fromRGB(255, 255, 255),
    TextSecondary = Color3.fromRGB(72, 72, 72),
    TextPlaceholder = Color3.fromRGB(150, 150, 150),
    DarkElement = Color3.fromRGB(43, 43, 43),
    MediumElement = Color3.fromRGB(52, 52, 52),
    MinimizeIcon = Color3.fromRGB(199, 199, 199)
}

function SentinelLib:Window(title)
    if CoreGui:FindFirstChild("SentinelLIB") then
        CoreGui.SentinelLIB:Destroy()
    end

    local MainGUI = Instance.new("ScreenGui")
    MainGUI.Name = "SentinelLIB"
    MainGUI.Parent = CoreGui
    MainGUI.IgnoreGuiInset = true
    MainGUI.ResetOnSpawn = false

    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "Main"
    MainFrame.Parent = MainGUI
    MainFrame.BackgroundColor3 = Colors.MainBackground
    MainFrame.BorderSizePixel = 0
    MainFrame.Size = UDim2.new(0, 470, 0, 283)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Active = true

    local initialPosition = MainFrame.Position
    local isDragging = false
    local dragInput, dragStart

    local function updatePosition(input)
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(
            initialPosition.X.Scale,
            initialPosition.X.Offset + delta.X,
            initialPosition.Y.Scale,
            initialPosition.Y.Offset + delta.Y
        )
    end

    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = true
            dragStart = input.Position
            initialPosition = MainFrame.Position
            
            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    isDragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)

    MainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and isDragging then
            updatePosition(input)
        end
    end)

    local MainCorner = Instance.new("UICorner")
    MainCorner.Name = "MainCorner"
    MainCorner.CornerRadius = UDim.new(0, 6)
    MainCorner.Parent = MainFrame

    local Shadow = Instance.new("ImageLabel")
    Shadow.Name = "Shadow"
    Shadow.Parent = MainFrame
    Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
    Shadow.BackgroundTransparency = 1
    Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
    Shadow.Size = UDim2.new(1, 30, 1, 30)
    Shadow.ZIndex = 0
    Shadow.Image = "rbxassetid://5554236805"
    Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    Shadow.ScaleType = Enum.ScaleType.Slice
    Shadow.SliceCenter = Rect.new(23, 23, 277, 277)

    local TopBar = Instance.new("Frame")
    TopBar.Name = "Top"
    TopBar.Parent = MainFrame
    TopBar.BackgroundColor3 = Colors.TopBar
    TopBar.BorderSizePixel = 0
    TopBar.Size = UDim2.new(1, 0, 0, 34)

    local TopCorner = Instance.new("UICorner")
    TopCorner.Name = "TopCorner"
    TopCorner.CornerRadius = UDim.new(0, 6)
    TopCorner.Parent = TopBar

    local Cover = Instance.new("Frame")
    Cover.Name = "Cover"
    Cover.Parent = TopBar
    Cover.AnchorPoint = Vector2.new(0.5, 1)
    Cover.BackgroundColor3 = Colors.TopBar
    Cover.BorderSizePixel = 0
    Cover.Position = UDim2.new(0.5, 0, 1, 0)
    Cover.Size = UDim2.new(1, 0, 0, 4)

    local Line = Instance.new("Frame")
    Line.Name = "Line"
    Line.Parent = TopBar
    Line.AnchorPoint = Vector2.new(0.5, 1)
    Line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Line.BackgroundTransparency = 0.92
    Line.Position = UDim2.new(0.5, 0, 1, 1)
    Line.Size = UDim2.new(1, 0, 0, 1)

    local Logo = Instance.new("ImageLabel")
    Logo.Name = "Logo"
    Logo.Parent = TopBar
    Logo.AnchorPoint = Vector2.new(0, 0.5)
    Logo.BackgroundTransparency = 1
    Logo.Position = UDim2.new(0, 4, 0.5, 0)
    Logo.Size = UDim2.new(0, 26, 0, 30)
    Logo.Image = "http://www.roblox.com/asset/?id=7803241868"
    Logo.ImageColor3 = Colors.Primary

    local MinimizeButton = Instance.new("ImageButton")
    MinimizeButton.Name = "Minimize"
    MinimizeButton.Parent = TopBar
    MinimizeButton.AnchorPoint = Vector2.new(1, 0.5)
    MinimizeButton.BackgroundTransparency = 1
    MinimizeButton.Position = UDim2.new(1, -6, 0.5, 0)
    MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
    MinimizeButton.Image = "rbxassetid://121304296213645"
    MinimizeButton.ImageColor3 = Colors.MinimizeIcon
    MinimizeButton.ScaleType = Enum.ScaleType.Crop

    local MinimizedIcon = Instance.new("ImageButton")
    MinimizedIcon.Name = "MinimizedIcon"
    MinimizedIcon.Parent = MainGUI
    MinimizedIcon.AnchorPoint = Vector2.new(1, 0)
    MinimizedIcon.BackgroundColor3 = Colors.Primary
    MinimizedIcon.BorderSizePixel = 0
    MinimizedIcon.Position = UDim2.new(1, -20, 0, 20)
    MinimizedIcon.Size = UDim2.new(0, 40, 0, 40)
    MinimizedIcon.Visible = false
    MinimizedIcon.ZIndex = 10
    MinimizedIcon.Image = "rbxassetid://7803241868"

    local MinimizedCorner = Instance.new("UICorner")
    MinimizedCorner.Name = "MinimizedCorner"
    MinimizedCorner.CornerRadius = UDim.new(0, 8)
    MinimizedCorner.Parent = MinimizedIcon

    local isIconDragging = false
    local iconDragInput, iconDragStart

    local function updateIconPosition(input)
        local delta = input.Position - iconDragStart
        MinimizedIcon.Position = UDim2.new(
            iconDragStart.X.Scale,
            iconDragStart.X.Offset + delta.X,
            iconDragStart.Y.Scale,
            iconDragStart.Y.Offset + delta.Y
        )
    end

    MinimizedIcon.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isIconDragging = true
            iconDragStart = input.Position
            iconDragStart = MinimizedIcon.Position
            
            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    isIconDragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)

    MinimizedIcon.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            iconDragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == iconDragInput and isIconDragging then
            updateIconPosition(input)
        end
    end)

    MinimizeButton.MouseButton1Click:Connect(function()
        MainFrame.Visible = false
        MinimizedIcon.Visible = true
    end)

    MinimizeButton.MouseEnter:Connect(function()
        TweenService:Create(MinimizeButton, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageColor3 = Colors.TextPrimary
        }):Play()
    end)

    MinimizeButton.MouseLeave:Connect(function()
        TweenService:Create(MinimizeButton, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageColor3 = Color3.fromRGB(166, 166, 166)
        }):Play()
    end)

    MinimizedIcon.MouseButton1Click:Connect(function()
        MainFrame.Visible = true
        MinimizedIcon.Visible = false
    end)

    local GameTitle = Instance.new("TextLabel")
    GameTitle.Name = "GameName"
    GameTitle.Parent = TopBar
    GameTitle.AnchorPoint = Vector2.new(0, 0.5)
    GameTitle.BackgroundTransparency = 1
    GameTitle.Position = UDim2.new(0, 32, 0.5, 0)
    GameTitle.Size = UDim2.new(0, 165, 0, 22)
    GameTitle.Font = Enum.Font.Gotham
    GameTitle.Text = title or "SentinelLIB"
    GameTitle.TextColor3 = Colors.Primary
    GameTitle.TextSize = 14
    GameTitle.TextXAlignment = Enum.TextXAlignment.Left

    local TabsFrame = Instance.new("Frame")
    TabsFrame.Name = "Tabs"
    TabsFrame.Parent = MainFrame
    TabsFrame.BackgroundColor3 = Colors.TabsBackground
    TabsFrame.BorderSizePixel = 0
    TabsFrame.Position = UDim2.new(0, 0, 0, 35)
    TabsFrame.Size = UDim2.new(0, 122, 1, -35)

    local TabsCorner = Instance.new("UICorner")
    TabsCorner.Name = "TabsCorner"
    TabsCorner.CornerRadius = UDim.new(0, 6)
    TabsCorner.Parent = TabsFrame

    local TabsCover = Instance.new("Frame")
    TabsCover.Name = "Cover"
    TabsCover.Parent = TabsFrame
    TabsCover.AnchorPoint = Vector2.new(1, 0.5)
    TabsCover.BackgroundColor3 = Colors.TabsBackground
    TabsCover.BorderSizePixel = 0
    TabsCover.Position = UDim2.new(1, 0, 0.5, 0)
    TabsCover.Size = UDim2.new(0, 5, 1, 0)

    local TabsContainer = Instance.new("ScrollingFrame")
    TabsContainer.Name = "TabsContainer"
    TabsContainer.Parent = TabsFrame
    TabsContainer.BackgroundTransparency = 1
    TabsContainer.BorderSizePixel = 0
    TabsContainer.Size = UDim2.new(1, 0, 1, 0)
    TabsContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabsContainer.ScrollBarThickness = 0

    local TabsListLayout = Instance.new("UIListLayout")
    TabsListLayout.Name = "TabsList"
    TabsListLayout.Parent = TabsContainer
    TabsListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabsListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabsListLayout.Padding = UDim.new(0, 5)

    local TabsPadding = Instance.new("UIPadding")
    TabsPadding.Name = "TabsPadding"
    TabsPadding.Parent = TabsContainer
    TabsPadding.PaddingTop = UDim.new(0, 5)

    TabsListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        TabsContainer.CanvasSize = UDim2.new(0, 0, 0, TabsListLayout.AbsoluteContentSize.Y + 10)
    end)

    local PagesFrame = Instance.new("Frame")
    PagesFrame.Name = "Pages"
    PagesFrame.Parent = MainFrame
    PagesFrame.BackgroundColor3 = Colors.MainBackground
    PagesFrame.BorderSizePixel = 0
    PagesFrame.Position = UDim2.new(0, 130, 0, 42)
    PagesFrame.Size = UDim2.new(1, -138, 1, -50)

    local PagesCorner = Instance.new("UICorner")
    PagesCorner.Name = "PagesCorner"
    PagesCorner.CornerRadius = UDim.new(0, 6)
    PagesCorner.Parent = PagesFrame

    local TabFunctions = {}
    local hasCreatedFirstTab = false

    function TabFunctions:Tab(tabName)
        local tabName = tabName or "Tab"
        
        local TabButton = Instance.new("TextButton")
        TabButton.Name = "TabButton"
        TabButton.Parent = TabsContainer
        TabButton.BackgroundColor3 = Colors.Primary
        TabButton.BackgroundTransparency = 1
        TabButton.Size = UDim2.new(1, -12, 0, 30)
        TabButton.AutoButtonColor = false
        TabButton.Font = Enum.Font.Gotham
        TabButton.Text = ""
        TabButton.TextColor3 = Colors.TextSecondary
        TabButton.TextSize = 14

        local TabButtonCorner = Instance.new("UICorner")
        TabButtonCorner.Name = "TabButtonCorner"
        TabButtonCorner.CornerRadius = UDim.new(0, 6)
        TabButtonCorner.Parent = TabButton

        local TabButtonText = Instance.new("TextLabel")
        TabButtonText.Name = "TextLabel"
        TabButtonText.Parent = TabButton
        TabButtonText.BackgroundTransparency = 1
        TabButtonText.Size = UDim2.new(1, 0, 1, 0)
        TabButtonText.Font = Enum.Font.Gotham
        TabButtonText.Text = tabName
        TabButtonText.TextColor3 = Colors.TextSecondary
        TabButtonText.TextSize = 14
        TabButtonText.TextXAlignment = Enum.TextXAlignment.Center

        local PageFrame = Instance.new("ScrollingFrame")
        PageFrame.Name = "Page"
        PageFrame.Visible = false
        PageFrame.Parent = PagesFrame
        PageFrame.Active = true
        PageFrame.BackgroundTransparency = 1
        PageFrame.BorderSizePixel = 0
        PageFrame.Size = UDim2.new(1, 0, 1, 0)
        PageFrame.ScrollBarThickness = 0
        PageFrame.ClipsDescendants = true

        local PageListLayout = Instance.new("UIListLayout")
        PageListLayout.Name = "PageListLayout"
        PageListLayout.Parent = PageFrame
        PageListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        PageListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        PageListLayout.Padding = UDim.new(0, 6)

        local PagePadding = Instance.new("UIPadding")
        PagePadding.Name = "PagePadding"
        PagePadding.Parent = PageFrame
        PagePadding.PaddingTop = UDim.new(0, 5)

        PageListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            PageFrame.CanvasSize = UDim2.new(0, 0, 0, PageListLayout.AbsoluteContentSize.Y + 13)
        end)

        TabButton.MouseButton1Click:Connect(function()
            for _, child in next, PagesFrame:GetChildren() do
                if child:IsA("ScrollingFrame") then
                    child.Visible = false
                end
            end
            
            PageFrame.Visible = true
            
            for _, child in next, TabsContainer:GetChildren() do
                if child:IsA("TextButton") then
                    TweenService:Create(child, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        BackgroundTransparency = 1
                    }):Play()
                    
                    local textLabel = child:FindFirstChild("TextLabel")
                    if textLabel then
                        TweenService:Create(textLabel, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                            TextColor3 = Colors.TextSecondary
                        }):Play()
                    end
                end
            end
            
            TweenService:Create(TabButton, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                BackgroundTransparency = 0.6
            }):Play()
            
            TweenService:Create(TabButtonText, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                TextColor3 = Colors.TextPrimary
            }):Play()
        end)

        local PageElements = {}
        
        local function setupHoverAnimation(button, defaultColor, hoverColor)
            button.MouseEnter:Connect(function()
                TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = hoverColor
                }):Play()
            end)
            
            button.MouseLeave:Connect(function()
                TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = defaultColor
                }):Play()
            end)
        end

        function PageElements:Button(buttonText, callback)
            local button = Instance.new("TextButton")
            button.Name = "Button"
            button.Parent = PageFrame
            button.BackgroundColor3 = Colors.PrimaryDark
            button.BorderSizePixel = 0
            button.Size = UDim2.new(1, -6, 0, 34)
            button.AutoButtonColor = false
            button.Font = Enum.Font.Gotham
            button.Text = buttonText or "Button"
            button.TextColor3 = Colors.TextPrimary
            button.TextSize = 14
            button.TextXAlignment = Enum.TextXAlignment.Center

            local buttonCorner = Instance.new("UICorner")
            buttonCorner.Name = "ButtonCorner"
            buttonCorner.CornerRadius = UDim.new(0, 6)
            buttonCorner.Parent = button

            setupHoverAnimation(button, Colors.PrimaryDark, Colors.PrimaryHover)

            button.MouseButton1Click:Connect(function()
                if callback then
                    pcall(callback)
                end
            end)
        end

        function PageElements:Toggle(toggleText, defaultValue, callback)
            local toggle = Instance.new("TextButton")
            toggle.Name = "Toggle"
            toggle.Parent = PageFrame
            toggle.BackgroundColor3 = Colors.ElementBackground
            toggle.BorderSizePixel = 0
            toggle.Size = UDim2.new(1, -6, 0, 34)
            toggle.AutoButtonColor = false
            toggle.Text = ""

            local toggleCorner = Instance.new("UICorner")
            toggleCorner.Name = "ToggleCorner"
            toggleCorner.CornerRadius = UDim.new(0, 6)
            toggleCorner.Parent = toggle

            local title = Instance.new("TextLabel")
            title.Name = "Title"
            title.Parent = toggle
            title.BackgroundTransparency = 1
            title.Position = UDim2.new(0, 8, 0, 0)
            title.Size = UDim2.new(1, -6, 1, 0)
            title.Font = Enum.Font.Gotham
            title.Text = toggleText or "Toggle"
            title.TextColor3 = Colors.TextPrimary
            title.TextSize = 14
            title.TextXAlignment = Enum.TextXAlignment.Left

            local toggleFrame = Instance.new("Frame")
            toggleFrame.Name = "ToggleFrame"
            toggleFrame.Parent = toggle
            toggleFrame.AnchorPoint = Vector2.new(1, 0.5)
            toggleFrame.BackgroundColor3 = Color3.fromRGB(12, 59, 161)
            toggleFrame.BackgroundTransparency = 1
            toggleFrame.BorderSizePixel = 0
            toggleFrame.Position = UDim2.new(1, -8, 0.5, 0)
            toggleFrame.Size = UDim2.new(0, 14, 0, 14)

            local toggleFrameCorner = Instance.new("UICorner")
            toggleFrameCorner.Name = "ToggleFrameCorner"
            toggleFrameCorner.CornerRadius = UDim.new(0, 3)
            toggleFrameCorner.Parent = toggleFrame

            local checkIcon = Instance.new("ImageLabel")
            checkIcon.Name = "Check"
            checkIcon.Parent = toggleFrame
            checkIcon.BackgroundTransparency = 1
            checkIcon.Position = UDim2.new(-0.214285731, 0, -0.214285731, 0)
            checkIcon.Size = UDim2.new(0, 20, 0, 20)
            checkIcon.Image = "http://www.roblox.com/asset/?id=7812909048"
            checkIcon.ImageTransparency = 1
            checkIcon.ScaleType = Enum.ScaleType.Fit

            local toggleStroke = Instance.new("UIStroke")
            toggleStroke.Name = "ToggleStroke"
            toggleStroke.Parent = toggleFrame
            toggleStroke.LineJoinMode = Enum.LineJoinMode.Round
            toggleStroke.Thickness = 2
            toggleStroke.Color = Color3.fromRGB(12, 59, 161)

            local isToggled = defaultValue ~= nil and defaultValue or false

            local function updateToggle()
                TweenService:Create(toggleFrame, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundTransparency = isToggled and 0 or 1
                }):Play()
                
                TweenService:Create(checkIcon, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    ImageTransparency = isToggled and 0 or 1
                }):Play()
            end

            if isToggled then
                updateToggle()
            end

            toggle.MouseEnter:Connect(function()
                TweenService:Create(toggle, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Colors.ElementHover
                }):Play()
            end)

            toggle.MouseLeave:Connect(function()
                TweenService:Create(toggle, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
                    BackgroundColor3 = Colors.ElementBackground
                }):Play()
            end)

            toggle.MouseButton1Click:Connect(function()
                isToggled = not isToggled
                updateToggle()
                
                if callback then
                    pcall(callback, isToggled)
                end
            end)

            local toggleFunctions = {}
            
            function toggleFunctions:Set(value)
                isToggled = value
                updateToggle()
                
                if callback then
                    pcall(callback, isToggled)
                end
            end
            
            return toggleFunctions
        end

        function PageElements:Label(labelText)
            local label = Instance.new("TextLabel")
            label.Name = "Label"
            label.Parent = PageFrame
            label.BackgroundColor3 = Colors.ElementBackground
            label.BorderSizePixel = 0
            label.Size = UDim2.new(1, -6, 0, 34)
            label.Font = Enum.Font.Gotham
            label.Text = labelText or "Label"
            label.TextColor3 = Colors.TextPrimary
            label.TextSize = 14
            label.TextXAlignment = Enum.TextXAlignment.Center

            local labelCorner = Instance.new("UICorner")
            labelCorner.Name = "LabelCorner"
            labelCorner.CornerRadius = UDim.new(0, 6)
            labelCorner.Parent = label

            local labelFunctions = {}
            
            function labelFunctions:Set(newText)
                label.Text = newText or "Label"
            end
            
            return labelFunctions
        end

        function PageElements:Slider(sliderText, minValue, maxValue, defaultValue, increment, callback)
            minValue = minValue or 0
            maxValue = maxValue or 100
            defaultValue = defaultValue or minValue
            increment = increment or 1
            
            if minValue >= maxValue then
                warn("Slider: Min must be less than Max. Using defaults.")
                minValue = 0
                maxValue = 100
            end

            local sliderFrame = Instance.new("Frame")
            sliderFrame.Name = "Slider"
            sliderFrame.Parent = PageFrame
            sliderFrame.BackgroundColor3 = Colors.ElementBackground
            sliderFrame.BorderSizePixel = 0
            sliderFrame.Size = UDim2.new(1, -6, 0, 48)

            local sliderCorner = Instance.new("UICorner")
            sliderCorner.Name = "SliderCorner"
            sliderCorner.CornerRadius = UDim.new(0, 6)
            sliderCorner.Parent = sliderFrame

            local title = Instance.new("TextLabel")
            title.Name = "Title"
            title.Parent = sliderFrame
            title.BackgroundTransparency = 1
            title.Position = UDim2.new(0, 8, 0, 0)
            title.Size = UDim2.new(1, -6, 0, 34)
            title.Font = Enum.Font.Gotham
            title.Text = sliderText or "Slider"
            title.TextColor3 = Colors.TextPrimary
            title.TextSize = 14
            title.TextXAlignment = Enum.TextXAlignment.Left

            local valueLabel = Instance.new("TextLabel")
            valueLabel.Name = "Value"
            valueLabel.Parent = sliderFrame
            valueLabel.AnchorPoint = Vector2.new(1, 0)
            valueLabel.BackgroundTransparency = 1
            valueLabel.Position = UDim2.new(1, -10, 0, 0)
            valueLabel.Size = UDim2.new(1, 0, 0, 34)
            valueLabel.Font = Enum.Font.Gotham
            valueLabel.Text = tostring(defaultValue)
            valueLabel.TextColor3 = Colors.TextPrimary
            valueLabel.TextSize = 14
            valueLabel.TextXAlignment = Enum.TextXAlignment.Right

            local sliderClickArea = Instance.new("TextButton")
            sliderClickArea.Name = "SliderClick"
            sliderClickArea.Parent = sliderFrame
            sliderClickArea.AnchorPoint = Vector2.new(0.5, 1)
            sliderClickArea.BackgroundColor3 = Colors.MediumElement
            sliderClickArea.BorderSizePixel = 0
            sliderClickArea.Position = UDim2.new(0.5, 0, 1, -8)
            sliderClickArea.Size = UDim2.new(1, -12, 0, 6)
            sliderClickArea.AutoButtonColor = false
            sliderClickArea.Text = ""
            sliderClickArea.Active = true

            local sliderClickCorner = Instance.new("UICorner")
            sliderClickCorner.Name = "SliderClickCorner"
            sliderClickCorner.CornerRadius = UDim.new(0, 6)
            sliderClickCorner.Parent = sliderClickArea

            local sliderDrag = Instance.new("Frame")
            sliderDrag.Name = "SliderDrag"
            sliderDrag.Parent = sliderClickArea
            sliderDrag.BackgroundColor3 = Colors.SecondaryButton
            sliderDrag.BorderSizePixel = 0
            sliderDrag.Size = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 1, 0)

            local sliderDragCorner = Instance.new("UICorner")
            sliderDragCorner.Name = "SliderDragCorner"
            sliderDragCorner.CornerRadius = UDim.new(0, 6)
            sliderDragCorner.Parent = sliderDrag

            local isDragging = false
            local dragInput = nil

            local function roundValue(value)
                return increment == 0 and value or math.floor(value / increment + 0.5) * increment
            end

            local function formatValue(value)
                local formatted = string.format("%.4f", value)
                formatted = formatted:gsub("0+$", "")
                formatted = formatted:gsub("%.$", "")
                return formatted
            end

            local function updateSlider(percentage)
                local rawValue = minValue + percentage * (maxValue - minValue)
                local roundedValue = roundValue(rawValue)
                local newPercentage = (roundedValue - minValue) / (maxValue - minValue)
                
                sliderDrag.Size = UDim2.new(newPercentage, 0, 1, 0)
                valueLabel.Text = formatValue(roundedValue)
                
                return roundedValue
            end

            local function handleDrag(input)
                local percentage = math.clamp((input.Position.X - sliderClickArea.AbsolutePosition.X) / sliderClickArea.AbsoluteSize.X, 0, 1)
                updateSlider(percentage)
            end

            local function beginDrag(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    isDragging = true
                    dragInput = input
                    
                    local connection
                    connection = input.Changed:Connect(function()
                        if input.UserInputState == Enum.UserInputState.End then
                            isDragging = false
                            dragInput = nil
                            
                            local percentage = math.clamp((input.Position.X - sliderClickArea.AbsolutePosition.X) / sliderClickArea.AbsoluteSize.X, 0, 1)
                            local finalValue = updateSlider(percentage)
                            
                            if callback then
                                pcall(callback, finalValue)
                            end
                            
                            connection:Disconnect()
                        end
                    end)
                end
            end

            sliderClickArea.InputBegan:Connect(beginDrag)

            UserInputService.InputChanged:Connect(function(input)
                if isDragging and input == dragInput and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                    handleDrag(input)
                end
            end)

            local touchArea = Instance.new("TextButton")
            touchArea.Name = "TouchArea"
            touchArea.Parent = sliderClickArea
            touchArea.BackgroundTransparency = 1
            touchArea.Size = UDim2.new(1, 0, 1, 0)
            touchArea.Text = ""
            touchArea.ZIndex = 2
            touchArea.Active = true
            touchArea.InputBegan:Connect(beginDrag)
        end

        function PageElements:InputBox(boxText, placeholder, callback)
            local inputFrame = Instance.new("Frame")
            inputFrame.Name = "InputBox"
            inputFrame.Parent = PageFrame
            inputFrame.BackgroundColor3 = Colors.ElementBackground
            inputFrame.BorderSizePixel = 0
            inputFrame.Size = UDim2.new(1, -6, 0, 34)

            local inputCorner = Instance.new("UICorner")
            inputCorner.Name = "InputCorner"
            inputCorner.CornerRadius = UDim.new(0, 6)
            inputCorner.Parent = inputFrame

            local title = Instance.new("TextLabel")
            title.Name = "Title"
            title.Parent = inputFrame
            title.BackgroundTransparency = 1
            title.Position = UDim2.new(0, 8, 0, 0)
            title.Size = UDim2.new(0.4, -6, 1, 0)
            title.Font = Enum.Font.Gotham
            title.Text = boxText or "Input"
            title.TextColor3 = Colors.TextPrimary
            title.TextSize = 14
            title.TextXAlignment = Enum.TextXAlignment.Left

            local boxContainer = Instance.new("Frame")
            boxContainer.Name = "BoxContainer"
            boxContainer.Parent = inputFrame
            boxContainer.BackgroundTransparency = 1
            boxContainer.AnchorPoint = Vector2.new(1, 0.5)
            boxContainer.Position = UDim2.new(1, -6, 0.5, 0)
            boxContainer.Size = UDim2.new(0.55, -12, 0, 24)
            boxContainer.ClipsDescendants = true

            local textBox = Instance.new("TextBox")
            textBox.Name = "Box"
            textBox.Parent = boxContainer
            textBox.BackgroundColor3 = Colors.DarkElement
            textBox.BorderSizePixel = 0
            textBox.Size = UDim2.new(1, 0, 1, 0)
            textBox.Font = Enum.Font.Gotham
            textBox.PlaceholderText = placeholder or "Enter text..."
            textBox.PlaceholderColor3 = Colors.TextPlaceholder
            textBox.Text = ""
            textBox.TextColor3 = Colors.TextPrimary
            textBox.TextSize = 14
            textBox.TextXAlignment = Enum.TextXAlignment.Center

            local textBoxCorner = Instance.new("UICorner")
            textBoxCorner.Name = "TextBoxCorner"
            textBoxCorner.CornerRadius = UDim.new(0, 4)
            textBoxCorner.Parent = textBox

            textBox.FocusLost:Connect(function(enterPressed)
                if callback and (enterPressed or not textBox:IsFocused()) then
                    pcall(callback, textBox.Text)
                end
            end)

            local hoverFrame = Instance.new("TextButton")
            hoverFrame.Name = "HoverFrame"
            hoverFrame.Parent = inputFrame
            hoverFrame.BackgroundColor3 = Colors.ElementBackground
            hoverFrame.BorderSizePixel = 0
            hoverFrame.Size = UDim2.new(1, 0, 1, 0)
            hoverFrame.AutoButtonColor = false
            hoverFrame.Text = ""
            hoverFrame.ZIndex = 0

            hoverFrame.MouseEnter:Connect(function()
                TweenService:Create(inputFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundColor3 = Colors.ElementHover
                }):Play()
            end)

            hoverFrame.MouseLeave:Connect(function()
                TweenService:Create(inputFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
                    BackgroundColor3 = Colors.ElementBackground
                }):Play()
            end)

            hoverFrame.MouseButton1Click:Connect(function()
                textBox:CaptureFocus()
            end)
        end

        function PageElements:Dropdown(dropdownText, options, callback)
            options = options or {}

            local dropdownFrame = Instance.new("Frame")
            dropdownFrame.Name = "Dropdown"
            dropdownFrame.Parent = PageFrame
            dropdownFrame.BackgroundTransparency = 1
            dropdownFrame.BorderSizePixel = 0
            dropdownFrame.ClipsDescendants = false
            dropdownFrame.Size = UDim2.new(1, -6, 0, 34)

            local chooseFrame = Instance.new("Frame")
            chooseFrame.Name = "Choose"
            chooseFrame.Parent = dropdownFrame
            chooseFrame.BackgroundColor3 = Colors.ElementBackground
            chooseFrame.BorderSizePixel = 0
            chooseFrame.Size = UDim2.new(1, 0, 0, 34)

            local chooseCorner = Instance.new("UICorner")
            chooseCorner.Name = "ChooseCorner"
            chooseCorner.CornerRadius = UDim.new(0, 6)
            chooseCorner.Parent = chooseFrame

            local title = Instance.new("TextLabel")
            title.Name = "Title"
            title.Parent = chooseFrame
            title.BackgroundTransparency = 1
            title.Position = UDim2.new(0, 8, 0, 0)
            title.Size = UDim2.new(1, -46, 1, 0)
            title.Font = Enum.Font.Gotham
            title.Text = dropdownText or "Dropdown"
            title.TextColor3 = Colors.TextPrimary
            title.TextSize = 14
            title.TextXAlignment = Enum.TextXAlignment.Left

            local arrow = Instance.new("ImageButton")
            arrow.Name = "Arrow"
            arrow.Parent = chooseFrame
            arrow.AnchorPoint = Vector2.new(1, 0.5)
            arrow.BackgroundTransparency = 1
            arrow.Position = UDim2.new(1, -8, 0.5, 0)
            arrow.Size = UDim2.new(0, 20, 0, 20)
            arrow.Image = "rbxassetid://3926307971"
            arrow.ImageColor3 = Color3.fromRGB(12, 59, 161)
            arrow.ImageRectOffset = Vector2.new(324, 524)
            arrow.ImageRectSize = Vector2.new(36, 36)
            arrow.ScaleType = Enum.ScaleType.Fit

            local optionHolder = Instance.new("Frame")
            optionHolder.Name = "OptionHolder"
            optionHolder.Parent = PageFrame
            optionHolder.BackgroundColor3 = Colors.ElementBackground
            optionHolder.BorderSizePixel = 0
            optionHolder.Position = UDim2.new(0, 0, 0, 0)
            optionHolder.Size = UDim2.new(1, -6, 0, 0)
            optionHolder.Visible = false
            optionHolder.ZIndex = 100
            optionHolder.ClipsDescendants = false

            local optionHolderCorner = Instance.new("UICorner")
            optionHolderCorner.Name = "OptionHolderCorner"
            optionHolderCorner.CornerRadius = UDim.new(0, 6)
            optionHolderCorner.Parent = optionHolder

            local optionListLayout = Instance.new("UIListLayout")
            optionListLayout.Name = "OptionList"
            optionListLayout.Parent = optionHolder
            optionListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
            optionListLayout.SortOrder = Enum.SortOrder.LayoutOrder
            optionListLayout.Padding = UDim.new(0, 5)

            local optionPadding = Instance.new("UIPadding")
            optionPadding.Name = "OptionPadding"
            optionPadding.Parent = optionHolder
            optionPadding.PaddingTop = UDim.new(0, 8)
            optionPadding.PaddingLeft = UDim.new(0, 8)
            optionPadding.PaddingRight = UDim.new(0, 8)
            optionPadding.PaddingBottom = UDim.new(0, 8)

            optionListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                local contentHeight = optionListLayout.AbsoluteContentSize.Y + 16
                optionHolder.Size = UDim2.new(1, -6, 0, contentHeight)
            end)

            local isDropdownOpen = false

            local function populateDropdown(optionList)
                optionList = optionList or {}
                
                for _, child in ipairs(optionHolder:GetChildren()) do
                    if child:IsA("TextButton") then
                        child:Destroy()
                    end
                end
                
                title.Text = dropdownText or "Dropdown"
                
                if #optionList == 0 then
                    local noOptionButton = Instance.new("TextButton")
                    noOptionButton.Name = "NoOption"
                    noOptionButton.Parent = optionHolder
                    noOptionButton.BackgroundColor3 = Colors.MediumElement
                    noOptionButton.BorderSizePixel = 0
                    noOptionButton.Size = UDim2.new(1, -16, 0, 30)
                    noOptionButton.Font = Enum.Font.Gotham
                    noOptionButton.Text = "No Options Available"
                    noOptionButton.TextColor3 = Colors.TextPlaceholder
                    noOptionButton.TextSize = 14
                    noOptionButton.TextXAlignment = Enum.TextXAlignment.Center
                    noOptionButton.AutoButtonColor = false

                    local noOptionCorner = Instance.new("UICorner")
                    noOptionCorner.Name = "NoOptionCorner"
                    noOptionCorner.CornerRadius = UDim.new(0, 6)
                    noOptionCorner.Parent = noOptionButton
                else
                    for _, optionText in ipairs(optionList) do
                        local optionButton = Instance.new("TextButton")
                        optionButton.Name = "Option"
                        optionButton.Parent = optionHolder
                        optionButton.BackgroundColor3 = Colors.PrimaryDark
                        optionButton.BorderSizePixel = 0
                        optionButton.Size = UDim2.new(1, -16, 0, 30)
                        optionButton.AutoButtonColor = false
                        optionButton.Font = Enum.Font.Gotham
                        optionButton.Text = optionText
                        optionButton.TextColor3 = Colors.TextPrimary
                        optionButton.TextSize = 14
                        optionButton.TextXAlignment = Enum.TextXAlignment.Center

                        local optionCorner = Instance.new("UICorner")
                        optionCorner.Name = "OptionCorner"
                        optionCorner.CornerRadius = UDim.new(0, 6)
                        optionCorner.Parent = optionButton

                        optionButton.MouseButton1Click:Connect(function()
                            if callback then
                                pcall(callback, optionText)
                            end
                            
                            title.Text = (dropdownText or "Dropdown") .. ": " .. optionText
                            isDropdownOpen = false
                            optionHolder.Visible = false
                            arrow.Rotation = 0
                        end)

                        setupHoverAnimation(optionButton, Colors.PrimaryDark, Colors.PrimaryHover)
                    end
                end
            end

            populateDropdown(options)

            arrow.MouseButton1Click:Connect(function()
                isDropdownOpen = not isDropdownOpen
                
                if isDropdownOpen then
                    optionHolder.Visible = true
                    arrow.Rotation = 180
                    
                    task.wait(0.01)
                    
                    local choosePosition = chooseFrame.AbsolutePosition
                    local chooseSize = chooseFrame.AbsoluteSize
                    local pagePosition = PageFrame.AbsolutePosition
                    
                    local offsetX = choosePosition.X - pagePosition.X
                    local offsetY = choosePosition.Y - pagePosition.Y + chooseSize.Y + 5
                    
                    optionHolder.Position = UDim2.new(0, offsetX, 0, offsetY)
                else
                    optionHolder.Visible = false
                    arrow.Rotation = 0
                end
            end)

            local dropdownFunctions = {}
            
            function dropdownFunctions:Refresh(newOptions)
                populateDropdown(newOptions)
                isDropdownOpen = false
                optionHolder.Visible = false
                arrow.Rotation = 0
            end
            
            return dropdownFunctions
        end

        if not hasCreatedFirstTab then
            hasCreatedFirstTab = true
            PageFrame.Visible = true
            
            TweenService:Create(TabButton, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                BackgroundTransparency = 0.6
            }):Play()
            
            TweenService:Create(TabButtonText, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                TextColor3 = Colors.TextPrimary
            }):Play()
        end

        return PageElements
    end

    return TabFunctions
end

return SentinelLib