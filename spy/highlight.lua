local a=cloneref or function(...)return...end local b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a(game:GetService'TextService'),a(game:GetService'RunService'),{},{},{},0,0,15,Enum.Font.Ubuntu,14,Color3.fromRGB(40,44,52),Color3.fromRGB(187,85,255),Color3.fromRGB(97,175,239),Color3.fromRGB(152,195,121),(Color3.fromRGB(209,154,102))local u,v,w,x=p,Color3.fromRGB(229,192,123),Color3.fromRGB(224,108,117),Color3.fromRGB(148,148,148)local y,z,A,B,C,D,E,F,G,H,I=x,Color3.fromRGB(240,240,240),{'^(function)[^%w_]','^(local)[^%w_]','^(if)[^%w_]','^(for)[^%w_]','^(while)[^%w_]','^(then)[^%w_]','^(do)[^%w_]','^(else)[^%w_]','^(elseif)[^%w_]','^(return)[^%w_]','^(end)[^%w_]','^(continue)[^%w_]','^(and)[^%w_]','^(not)[^%w_]','^(or)[^%w_]','[^%w_](or)[^%w_]','[^%w_](and)[^%w_]','[^%w_](not)[^%w_]','[^%w_](continue)[^%w_]','[^%w_](function)[^%w_]','[^%w_](local)[^%w_]','[^%w_](if)[^%w_]','[^%w_](for)[^%w_]','[^%w_](while)[^%w_]','[^%w_](then)[^%w_]','[^%w_](do)[^%w_]','[^%w_](else)[^%w_]','[^%w_](elseif)[^%w_]','[^%w_](return)[^%w_]','[^%w_](end)[^%w_]'},{{'"','"'},{"'","'"},{'%[%[','%]%]',true}},{'%-%-%[%[[^%]%]]+%]?%]?','(%-%-[^\n]+)'},{'[^%w_]([%a_][%a%d_]*)%s*%(','^([%a_][%a%d_]*)%s*%(','[:%.%(%[%p]([%a_][%a%d_]*)%s*%('},{'[^%w_](%d+[eE]?%d*)','[^%w_](%.%d+[eE]?%d*)','[^%w_](%d+%.%d+[eE]?%d*)','^(%d+[eE]?%d*)','^(%.%d+[eE]?%d*)','^(%d+%.%d+[eE]?%d*)'},{'[^%w_](true)','^(true)','[^%w_](false)','^(false)','[^%w_](nil)','^(nil)'},{'[^%w_:]([%a_][%a%d_]*):','^([%a_][%a%d_]*):'},{'[^_%s%w=>~<%-%+%*]','>','~','<','%-','%+','=','%*'},{}function isOffLimits(J)for K,L in next,I do if J>=L[1]and J<=L[2]then return true end end return false end function gfind(J,K)return coroutine.wrap(function()local L=0 while true do local M,N=J:find(K,L)if M and N~=#J then L=N+1 coroutine.yield(M,N)else return end end end)end function renderComments()local J,K=d:getRaw(),1 for L,M in next,C do for N,O in gfind(J,M)do if K%1000==0 then c.Heartbeat:Wait()end K+=1 if not isOffLimits(N)then for P=N,O do table.insert(I,{N,O})if f[P]then f[P].Color=x end end end end end end function renderStrings()local J,K,L,M,N,O,P=false for Q,R in next,f do if K then R.Color=o local S=''for T=N,Q do S=S..f[T].Char end if R.Char:match(L)and not not M or(S:match('(\\*)'..L..'$')and#S:match('(\\*)'..L..'$')%2==0)then J=true K=nil L=nil M=nil O=Q I[P][2]=O end end if not J then for S,T in next,B do if R.Char:match(T[1])and not isOffLimits(Q)then K=T[1]L=T[2]M=T[3]R.Color=o N=Q P=#I+1 I[P]={N,math.huge}end end end J=false end end function highlightPattern(J,K)local L,M=d:getRaw(),1 for N,O in next,J do for P,Q in gfind(L,O)do if M%1000==0 then c.Heartbeat:Wait()end M+=1 if not isOffLimits(P)and not isOffLimits(Q)then for R=P,Q do if f[R]then f[R].Color=K end end end end end end function autoEscape(J)for K=0,#J do local L=string.sub(J,K,K)if L=='<'then J=string.format('%s%s%s',string.sub(J,0,K-1),'&lt;',string.sub(J,K+1,-1))K+=3 elseif L=='>'then J=string.format('%s%s%s',string.sub(J,0,K-1),'&gt;',string.sub(J,K+1,-1))K+=3 elseif L=='"'then J=string.format('%s%s%s',string.sub(J,0,K-1),'&quot;',string.sub(J,K+1,-1))K+=5 elseif L=="'"then J=string.format('%s%s%s',string.sub(J,0,K-1),'&apos;',string.sub(J,K+1,-1))K+=5 elseif L=='&'then J=string.format('%s%s%s',string.sub(J,0,K-1),'&amp;',string.sub(J,K+1,-1))K+=4 end end return J end function render()I={}e={}s:ClearAllChildren()t:ClearAllChildren()highlightPattern(D,n)highlightPattern(E,p)highlightPattern(A,m)highlightPattern(G,v)highlightPattern(F,u)highlightPattern(H,z)renderComments()renderStrings()local J,K,L='',''h=0 g=1 for M=1,#f+1 do local N=f[M]if M==#f+1 or N.Char=='\n'then J=J..(L and'</font>'or'')local O,P=Instance.new'TextLabel',b:GetTextSize(K,k,j,Vector2.new(math.huge,math.huge)).X+60 if P>h then h=P end O.TextXAlignment=Enum.TextXAlignment.Left O.TextYAlignment=Enum.TextYAlignment.Top O.Position=UDim2.new(0,0,0,g*i-i/2)O.Size=UDim2.new(0,P,0,k)O.RichText=true O.Font=j O.TextSize=k O.BackgroundTransparency=1 O.Text=J O.Parent=s if M~=#f+1 then local Q=Instance.new'TextLabel'Q.Text=g Q.Font=j Q.TextSize=k Q.Size=UDim2.new(1,0,0,i)Q.TextXAlignment=Enum.TextXAlignment.Right Q.TextColor3=y Q.Position=UDim2.new(0,0,0,g*i-i/2)Q.BackgroundTransparency=1 Q.Parent=t end J=''K=''L=nil g+=1 updateZIndex()updateCanvasSize()if g%5==0 then c.Heartbeat:Wait()end elseif N.Char==' 'then J=J..N.Char K=K..N.Char elseif N.Char=='\t'then J=J..string.rep(' ',4)K=K..N.Char else if N.Color==L then J=J..autoEscape(N.Char)else J=J..string.format('%s<font color="rgb(%d,%d,%d)">',L and'</font>'or'',N.Color.R*255,N.Color.G*255,N.Color.B*255)J=J..autoEscape(N.Char)L=N.Color end K=K..N.Char end end updateZIndex()updateCanvasSize()end function onFrameSizeChange()local J=q.AbsoluteSize r.Size=UDim2.new(0,J.X,0,J.Y)end function updateCanvasSize()r.CanvasSize=UDim2.new(0,h,0,g*i)end function updateZIndex()for J,K in next,q:GetDescendants()do if K:IsA'GuiObject'then K.ZIndex=q.ZIndex end end end function d.init(J,K)if typeof(K)=='Instance'and K:IsA'Frame'then K:ClearAllChildren()q=K r=Instance.new'ScrollingFrame's=Instance.new'Frame't=Instance.new'Frame'local L=K.AbsoluteSize r.Size=UDim2.new(0,L.X,0,L.Y)r.BackgroundColor3=l r.BorderSizePixel=0 r.ScrollBarThickness=4 s.Size=UDim2.new(1,-40,1,0)s.Position=UDim2.new(0,40,0,0)s.BackgroundTransparency=1 t.Size=UDim2.new(0,25,1,0)t.BackgroundTransparency=1 s.Parent=r t.Parent=r r.Parent=q render()q:GetPropertyChangedSignal'AbsoluteSize':Connect(onFrameSizeChange)q:GetPropertyChangedSignal'ZIndex':Connect(updateZIndex)else error('Initialization error: argument '..typeof(K)..' is not a Frame Instance')end end function d.setRaw(J,K)K=K..'\n'f={}for L=1,#K do table.insert(f,{Char=K:sub(L,L),Color=w})if L%1000==0 then c.Heartbeat:Wait()end end render()end function d.getRaw(J)local K=''for L,M in next,f do K=K..M.Char end return K end function d.getString(J)local K=''for L,M in next,f do K=K..M.Char:sub(1,1)end return K end function d.getTable(J)return f end function d.getSize(J)return#f end function d.getLine(J,K)local L,M,N=0,false,''for O,P in next,f do L=L+1 if P.Char=='\n'and not M then M=true end if M and P.Char~='\n'then N=N..P.Char elseif M then break end end return N end function d.setLine(J,K,L)if#f and K>=f[#f].Line then for M=f[#f].Line,K do table.insert(f,{Char='\n',Line=M,Color=w})local N=d:getRaw()N=N:sub(0,#N)..L d:setRaw(N)return end elseif not#f then return end local M,N,O=d:getRaw(),0,0 for P in gfind(M,'\n')do O=O+1 if K==O then M=M:sub(0,N)..L..M:sub(P,#M)d:setRaw(M)return end end error'Unable to set line'end function d.insertLine(J,K,L)if#f and K>=f[#f].Line then d:setLine(K,L)elseif not#f then return end local M,N,O=d:getRaw(),0,0 for P in gfind(M,'\n')do O=O+1 if K==O then M=M:sub(0,N)..'\n'..L..'\n'..M:sub(P,#M)d:setRaw(M)return end end error'Unable to insert line'end local J={}function J.new(...)local K,L=d,{}K.__index=K setmetatable(L,K)L:init(...)return L end return J